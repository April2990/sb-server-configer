# مدیریت پراکسی سینگ باکس
در بروز رسانی که انجام شد این قابلیت به بات اضاقه شده:
- کارای راه اندازی از جمله ویرایش کانفیگ و فعال کردن سرویس رو خودش انجام میده
- قابلیت تعریف کانال و ارسال کانفیگ ها به کانال تلگرامی
- خودش در بازه های زمانی که براش تعریف کردید uuid، key_pair و short_id رو تجدید میکنه و کانفیگ جدید رو تو بات میفرسته
- با دستور status میتونید استاتوس هر سرویسی از جمله سینگ باکس یا بات رو بگیرید
- با دستور start (برای اولین بار) یوزر شما بعنوان صاحب بات ثبت میشه و دیگه فقط به پیام های شما جواب میده
- دفعات بعد که دستور start رو بفرستید میتونید به صورت دستی uuid و... سینگ باکس رو تغییر بدید و کانفیگ جدید رو براتون میفرسته 
- کسی غیر از خودتون به بات پیام start بده آخرین کانفیگ رو براش میفرسته

 

#### از طریق آموزش سگارو از لینک زیر نحوه پیدا کردن SNI خوب و ساز و کار کلی کارکرد سیستم رو یاد بگیرید، من خودم از اونجا یاد گرفتم

[آموزش سگارو](https://telegra.ph/How-run-Reality-protocol-with-Xray-or-Sing-box-Core-with-iSegaro-04-18)

## راه اندازی بات
اگه قبلا نسخه ای دیگه از این بات رو نصب کردید ابتدا با دستور های زیر قبلی ها رو پاک کنید:
```bash
curl -Lo /root/cleaner.py https://raw.githubusercontent.com/hrostami/sb-server-configer/master/cleaner.py
python3 cleaner.py
```
اول فایل first.py رو میگیریم که آی پی و پورت سرورتون و توکن بات تلگرام رو به راحتی ست کنید و بقیه کار رو هم خودش خودکار انجام میده شما نیازی نیست کاری انجام بدید. فقط قبلش باید دستور زیر رو اجرا کنید که مشخص بشه پردازنده سرور تون arm هست یا amd. 

```bash
uname -m
```
اگه نوشته بود arm یا aarch (با هر پسوندی) یعنی پردازنده  arm هست و باید دستور اول رو اجرا کنید، در غیر این صورت دستور دوم رو اجرا کنید:
```bash
curl -Lo /root/first.py https://raw.githubusercontent.com/hrostami/sb-server-configer/master/first_arm.py
```
```bash
curl -Lo /root/first.py https://raw.githubusercontent.com/hrostami/sb-server-configer/master/first.py
```
حالا بریم سراغ اجرا کردن اسکریپت. اول ازتون میپرسه میخواید به کانال وصل بشه یا به خودتون پیام بده، اگر میخواید به کانال وصل شه تایپ کنید ch و اگه برای خودتون me . بعدش به ترتیب آی پی، پورت سرور، آی دی کانال تلگرام که باید از بات myidbot بگیرید، بعدش توکن بات تلگرام تون و در نهایت بازه زمانی ای که میخواید خودکار کانفیگ سینگ باکس رو تغییر بده به ثانیه(یعنی برای هر یکساعت یه بار میشه 3600). دو تا دستور زیر رو اجرا کنید:
```bash
python3 first.py
```
بعد از اینکه تموم شد دستور زیر رو اجرا کنید که فایل first.py که دیگه بهش احتیاج نداریم حذف بشه:
```bash
rm first.py
```

اسکریپت مون که اجرا شد خودش براتون کانفیگ اولیه رو ست میکنه و شما با ارسال دستور start/ در تلگرام به بات تون هم کانفیگ رو دریافت کنید هم آی دی شما بعنوان صاحب ست میشه و دیگه بات فقط به شما جواب میده. 
در نظر داشته باشید برای اینکه بات بتونه تو کانالی که براش تعریف کردید پیام بده باید اونجا ادمین شده باشه!

اگر بعد از اینکه پراکسی رو راه انداحتید کانفیگ تون تایم اوت داد اس ان آی  جدید براش بفرستید تو تلگرام و دوباره امتحان کنید. پیامی که به بات تلگرام میفرستید هم به این شکل باشه
```bash
/replace sni
```
با دستور status/ هم میتونید استاتوس سینگ باکس یا کانفیگر رو تو تلگرام دریافت کنید که ببینید سینگ باکس در چه وضعیتیه و اگه مشکلی هست از کجاست.
```bash
/status sing-box
/status configer.service
```

*با تشکر از همه کسایی که برای دسترسی آزاد به اینترنت زحمت میکشن از جمله سگارو عزیز و تیم IRCF*
